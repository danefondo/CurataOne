extends layout__dashboard

include entryDesigns/entryOne
include images/filledArrow
include images/externalLink

block heading
	- var coreURL = 'dashboard';
block content
	- var coreURL = 'dashboard';
	//- .emptyModal
	//- 	.modalBackground
	//- 	.createEntryModal__space
	//- 		.cancelListCreating x
	//- 		.sectionArea
	//- 			.listChoicesTitle__space Choose list
	//- 			.list__switchList__space Switch List
	//- 			ul.listChoices__space
	//- 				if (curata.curataList && curata.curataList.length)
	//- 					each list in curata.curataList
	//- 						.listChoicesContainer__space(data-id= list.id)
	//- 							.listChoice__space
	//- 								.listChoiceLink__space
	//- 									if (list.listName && list.listName.length)
	//- 										.listName__space #{list.listName}
	//- 									else
	//- 										.listName__space Untitled list
	//- 									.addEntry__space + add new entry
	.emptyModal
		.modalBackground
		.createEntryModal__space
			.createEntryModalActions__space
				.entryFull__space.createEntryModalActionButton__space Full page editor
				.entrySwitch__space.createEntryModalActionButton__space Switch list
				.entryClear__space.createEntryModalActionButton__space Clear
				.entrySaveAsDraft__space.createEntryModalActionButton__space Save draft
				.cancelListCreating x
			.sectionArea
				.entryContainerTitle__space New entry
				.modalEntryId
				.entryContainer__space
					.entryDetails
						.entryComponentTitle Category
						.entryDetailsGroup.entryDetailsGroupSpecial.flex
							select
								option(value="" data-display-text="Select category: ") None
								each list in curata.curataList
									if (list.listName && list.listName.length)
										option(value=list.id) #{list.listName}
									else
										option(value=list.id) Untitled list
							.entryNewCategory__space + Category
							.entryCreateCategoryBlock__space
								input.entryNewCategoryText__space(placeholder="Write your category")
								.entryNewCategoryCreate__space Create
								.entryNewCategoryCancel__space X
						.entryComponentTitle Title
						.entryDetailsGroup
							input.EntryTitle(placeholder= "Your title")
						.entryComponentTitle Summary
						.entryDetailsGroup
							.mainEditor
								textarea.postDescription(maxlength="100" placeholder="Write a short summary of less than 100 characters.")
						.entryComponentTitle Link
						.entryDetailsGroup
							.linkContainer
								input.entryLink(placeholder="http://example.com")
								a.entryLinkPreview.hidden(href="#" target="_blank")
									+externalLink
						.entryComponentTitle Image
						.entryDetailsGroup
							.mainImage(id= "imageArea_")
								.file-upload.imageBlock(data-type="mainImage")
									form.image-upload-wrap.imageForm(action= "/' + coreURL + '/sign-s3" method="POST" enctype= "multipart/form-data")
										input#file-input.file-upload-input(type='file', name='image', accept='image/jpg')
										.drag-text
											button.file-upload-btn(type='button') Add Image
											h3 Or just drag and drop a file
									.file-upload-content
										img.file-upload-image(src='#', alt='your image')
										.image-title-wrap
											button.remove-image(type='button')
												| Remove 
												span.image-title Uploaded Image
				.createEntry__space Create entry
	//- if public, show | if not, display message
	.curataId(id= curata.id)
	if user
		.userId(id= user.id)
	.sideNav
		.curataSwitcher
			.currentCurataSwitch(id= curata.id) Switch Space
			.drop-down__menu-box3.unsortable.drop-down-extra-width
				.curataSwitchHeader Switch current Space
				if (user.defaultCurataId && curata.id == user.defaultCurataId)
					.defaultCurata Default Space
				else
					.makeDefault Make default
				ul.drop-down__menu3
					each space in curatas
						if (space.id !== curata.id)
							li.drop-down__item3.drop-down-extra-styling
								a.curata-link(href='/' + coreURL + '/curatas/' + space.id) #{space.curataName}
		a.curataName(href= '/' + coreURL + '/curatas/' + curata.id) #{curata.curataName}
		.goToAllCuratas
			a.allCuratasLink(href='/' + coreURL + '/curatas') View all my Spaces
		a.viewCurataLive(target="_blank" href='/browse/users/' + user.id + '/curatas/' + curata.id) View live
		//- if curata exists & selected, display 
		ul.sideNavButtons
			li.sideNavLinkContainer
				a.sidelink.size18.block(href='/' + coreURL + '/curatas/' + curata.id) Space
				a.sidelink.size18.block(href='/' + coreURL + '/curatas/' + curata.id + '/entries') Entries
				a.sidelink.size18.block(href='/' + coreURL + '/curatas/' + curata.id + '/appearance') Appearance
				a.sidelink.size18.block(href='/' + coreURL + '/curatas/' + curata.id + '/settings') Settings
	.sections__liveSpace
		.helperNavigation
			.navlinksContainer__liveCurata
				.newList__space + New list
				if (curata.curataList && curata.curataList.length && curata.curataList.length > 1)
					.openListChooser__space + New entry
				else
					.newEntry__space + New entry
		.section__liveCurata
			.header__liveCurata
				p.mainTitle__liveCurata #{curata.curataName}
				p.mainDescription__liveCurata #{curata.curataDescription}
		.section__liveCurata
			.lists__liveCurata
				if (lists && lists.length)
					each list in lists
						- var publishedExist = "false";
						if (list.entries && list.entries.length)
							// handle case if there are no published entries
							- for (var i = 0; i < list.entries.length; i++)
								if (list.entries[i].entryState == "Published")
									- i += 9999999
									- publishedExist = "true";
							if (publishedExist == "true")
								.listContainer__liveCurata
									p.listTitle__liveCurata #{list.listName}
									.list__liveCurata(id= list.id)
										each entry in list.entries
											if (entry.entryState == "Published")
												.entry__liveCurata(id= entry.id href='/browse/users/' + user.id + '/curatas/' + curata.id + '/lists/' + list.id + '/entries/' + entry.id)
													//- if (entry.entryLink)
													//- 	a.entryTitle__liveCurata(href= entry.entryLink target="_blank") Link
													if (entry.entryTitle)
															a.entryTitle__liveCurata(href= '/browse/users/' + user.id + '/curatas/' + curata.id + '/lists/' + list.id + '/entries/' + entry.id) #{entry.entryTitle}
													else
															a.entryTitle__liveCurata(href= '/browse/users/' + user.id + '/curatas/' + curata.id + '/lists/' + list.id + '/entries/' + entry.id) Untitled entry
													if (entry.entryImageURL)
														.curataEntryImage(data-image-key= entry.entryImageKey style='background-image: url(' + entry.entryImageURL + ');')
							//- else
							//- 	.nothingPublished__liveCurata
							//- 		p There are no published entries in this list.
						//- else 
						//- 	.noEntries__liveCurata You have no entries
				else 
					.noLists__liveCurata Curata is empty.


block scripts
	script(src='/js/space__editing.js')
	script(src='/js/customSelect.js')
